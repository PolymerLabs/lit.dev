{% extends 'default.html' %}
{% include 'topnav.html' %}

{% block head %}
  <link rel="stylesheet" href="{{site.baseurl}}/css/guide.css">
{% endblock %}

{% block content %}
  {% set navSection = eleventyNavigation.parent or eleventyNavigation.key %}
  <main class="wrapper">
    <div class="side">
      <side-nav>
        {%- set navSections = collections.guide | eleventyNavigation -%}
        {# Uncomment to use prebuilt nav
        {{ navSections | eleventyNavigationToHtml | safe }}
        #}
        <ul>
        {%- for entry in navSections %}
          <li{% if entry.url == page.url %} class="my-active-class"{% endif %}>
            {%- if entry.children | length %}
              <span class="sectionHead">{{ entry.title }}</span>
              {% set navPages = entry.children %}
              <ul>
              {%- for entry in navPages %}
                <li{% if entry.url == page.url %} class="my-active-class"{% endif %}>
                  <a href="{{ entry.url | url }}">{{ entry.title }}</a>
                </li>
              {%- endfor %}
              </ul>  
            {%- else %}
              <a href="{{ entry.url | url }}">{{ entry.title }}</a>
            {%- endif %}
          </li>
        {%- endfor %}
        </ul>
      </side-nav>
    </div>

    <article>
      <h1>{{ title }}</h1>
      {{ content | safe }}
    </article>

    <div class="side">
      <nav class="toc">
        <h2>Contents</h2>
        {{ content | toc | safe }}
      </nav>
    </div>

  </main>
{% endblock %}
