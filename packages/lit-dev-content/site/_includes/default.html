<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>{% if page.title %}{{ page.title }} &ndash;{% endif %} {{ site.name }}</title>
    <meta name="description" content="{{ site.description }}">
    <meta name="theme-color" content="#324fff">
    <link rel="icon" href="{{ site.baseurl }}/images/flame-flat.svg"></link>
    <link rel="mask-icon" href="{{ site.baseurl }}/images/flame-flat.svg" color="#324fff">

    {% inlinecss "global.css" %}

    {% inlinejs "mods.js" %}
    {% inlinecss "mods.css" %}

    {% if dev %}
      <script type="module" async src="/lib/global.js"></script>
      <script type="module" async src="/lib/playground-elements.js"></script>
    {% else %}
      <script type="module" async src="/js/global.js"></script>
      <script type="module" async src="/js/playground-elements.js"></script>

      <!-- Note it would be more correct to <link rel="modulepreload"> this common
          script, since the other two modules already import it, but
          modulepreload is not yet supported in Firefox or Safari. No real harm
          in actually loading it here. -->
      <script type="module" async src="/js/common.js"></script>
    {% endif %}

    <link rel="preconnect" href="https://fonts.gstatic.com">

    {% block head %}{% endblock %}

    {% if site.google_analytics %}{% include 'analytics.html' %}{% endif %}
  </head>
  <body>
    <mwc-drawer type="modal" id="mobileDrawer">
      <nav id="mobileNav">
        <ol>
          <li>
            <span class="sectionHead">Site</span>
            <ol>{% include 'nav-items.html' %}</ol>
          </li>
          {% block drawer %}{{ content | safe }}{% endblock %}
        </ol>
      </nav>
    </mwc-drawer>

    {% include 'header.html' %}

    <main>
      {% block content %}{{ content | safe }}{% endblock %}
    </main>

    <footer>
      {% include 'footer.html' %}
    </footer>
  </body>
</html>
