{% set navSection = eleventyNavigation.parent or eleventyNavigation.key %}
{%- set navSections = collections[collection] | eleventyNavigation -%}

{%- for section in navSections %}

  {# Are any children in this section active? #}
  {% set sectionActive = false %}
  {%- for child in section.children %}
    {% if (baseurl + child.url) == page.url %}
      {% set sectionActive = true %}
    {% endif %}
  {%- endfor %}

  <li{% if sectionActive %} class="activeSection"{% endif %}>
    {%- if section.children | length %}
      <span class="sectionHead{% if section.url == page.url %} active{% endif %}">
        {{ section.title | i18n}}</span>
      <ol>
      {%- for child in section.children %}
        <li{% if (baseurl + child.url) == page.url %} class="active"{% endif %}>
          <a href="{{ (baseurl + child.url) | url }}">{{ child.title | i18n}}</a>
        </li>
      {%- endfor %}
      </ol>
    {%- else %}
      <a href="{{ (baseurl + section.url) | url }}">{{ section.title | i18n }}</a>
    {%- endif %}
  </li>
{%- endfor %}
