The tooltips are mostly positioned ok, but its easy to get them to run
off the screen if the target element is near the edge of the window.
Positioning the tooltip robustly is fairly tricky since not only the layout
metrics of target element but those of the browser window and the tooltip
itself must also be considered. Luckily, there's a small library focused just
on solving this problem called [floating-ui](https://floating-ui.com/).

To use it, first import the API you'll need:

```ts
import {
  computePosition,
  autoPlacement,
  offset,
  shift
} from '@floating-ui/dom';
```

Now replace the positioning code you wrote with the `floating-ui` library code.
The library API needs the target element, the tooltip element and has a bunch
of options for how to setup positioning. It provides the `x, y` position for
the tooltip via a `Promise`. The library provides a bunch of options with which
you can experiment.

```ts
show = () => {
  this.style.display = '';
  // Robust positioning
  computePosition(this.target, this, {
    strategy: 'fixed',
    middleware: [
      offset(this.offset),
      shift(),
      autoPlacement({allowedPlacements: ['top', 'bottom']})
    ],
  }).then(({x, y}: {x: number, y: number}) => {
    this.style.left = `${x}px`;
    this.style.top = `${y}px`;
  });
}
```

Now move your pointer over the box labeled "3" when it is near the bottom of
the preview window. Its tooltip should now display above the box if there's
more room for it there.
